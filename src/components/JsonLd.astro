---
import { SITE } from '../config/site.ts';
interface Props { lang: string; faqItems: {q:string; a:string}[]; }
const { lang, faqItems } = Astro.props;

const BCP47: Record<string, string> = {
  ro:'ro-RO', en:'en-GB', de:'de-DE', fr:'fr-FR', es:'es-ES',
  it:'it-IT', pl:'pl-PL', pt:'pt-PT', hu:'hu-HU', cs:'cs-CZ',
  sk:'sk-SK', bg:'bg-BG', hr:'hr-HR', lt:'lt-LT', lv:'lv-LV',
  et:'et-EE', mt:'mt-MT', sl:'sl-SI', sv:'sv-SE', da:'da-DK',
  nl:'nl-NL', el:'el-GR', fi:'fi-FI', ga:'ga-IE',
};
const inLanguage = BCP47[lang] ?? lang;

const softwareApp = {
  '@context':'https://schema.org',
  '@type':'SoftwareApplication',
  'name':'EguWallet',
  'operatingSystem':'Android',
  'applicationCategory':'UtilitiesApplication',
  'offers':{'@type':'Offer','price':'0','priceCurrency':'EUR'},
  'description':'EUDI Wallet conform eIDAS 2.0 — identitate digitală europeană',
  'url':SITE,
  'downloadUrl':'https://play.google.com/store/apps/details?id=com.eguwallet.wallet',
  'author':{'@type':'Organization','name':'IT Eguilde SRL'},
};

const organization = {
  '@context':'https://schema.org',
  '@type':'Organization',
  'name':'IT Eguilde SRL',
  'url':SITE,
  'logo':`${SITE}/assets/logo-shield.svg`,
  'sameAs':['https://github.com/eguilde'],
};

const website = {
  '@context':'https://schema.org',
  '@type':'WebSite',
  'name':'EguWallet',
  'url':SITE,
  'inLanguage': inLanguage,
};

const faqPage = {
  '@context':'https://schema.org',
  '@type':'FAQPage',
  'mainEntity': faqItems.map(({q,a}) => ({
    '@type':'Question',
    'name': q,
    'acceptedAnswer':{'@type':'Answer','text': a},
  })),
};
---
<script type="application/ld+json" is:inline set:html={JSON.stringify(softwareApp)} />
<script type="application/ld+json" is:inline set:html={JSON.stringify(organization)} />
<script type="application/ld+json" is:inline set:html={JSON.stringify(website)} />
<script type="application/ld+json" is:inline set:html={JSON.stringify(faqPage)} />
